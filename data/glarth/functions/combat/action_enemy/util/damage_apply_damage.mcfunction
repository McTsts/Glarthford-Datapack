execute if score damageType tbcStats matches 0 if entity @e[tag=tbcTurn,type=!player] run tellraw @a ["",{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.success","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@s[type=!player]","interpret":true}],{"nbt":"out","storage":"ntca:io","interpret":true,"color":"red"}]}]
execute if score damageType tbcStats matches 0 if entity @e[tag=tbcTurn,type=player] run tellraw @a ["",{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.took_damage","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@s[type=!player]","interpret":true}],{"nbt":"out","storage":"ntca:io","interpret":true,"color":"red"}]}]
execute if score damageType tbcStats matches 1 run tellraw @a ["",{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.dmg_fall","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"nbt":"ArmorItems[0].tag.CustomName","entity":"@s[type=!player]","interpret":true}],{"nbt":"out","storage":"ntca:io","interpret":true,"color":"red"}]}]
scoreboard players set damageType tbcStats 0
execute if score @s tbcAbsorption matches 1.. run function glarth:combat/action_enemy/util/absorption
scoreboard players operation @s tbcHealth -= damageDis tbcStats
scoreboard players operation @s tbcPoison += poison tbcStats
scoreboard players operation @s tbcFire += fire tbcStats
scoreboard players operation @s tbcInfection += infection tbcStats
scoreboard players operation @s tbcPumpkin += pumpkin tbcStats
scoreboard players operation @s tbcWither += wither tbcStats
scoreboard players operation @s tbcBlindness += blindness tbcStats
scoreboard players operation @s tbcQueue += queuex tbcStats
execute if score pumpkin tbcStats matches 1.. if entity @s[type=player] run item replace entity @s armor.head with carved_pumpkin{display:{Name:'""'},Enchantments:[{id:"binding_curse",lvl:1}],CustomModelData:1,HideFlags:63}
execute if score pumpkin tbcStats matches 1.. if entity @s[type=player] as @e[tag=tbcTargetAS] at @s run data merge entity @e[tag=charQ5,limit=1,sort=nearest] {ArmorItems:[{},{},{},{id:"raw_copper",Count:1,tag:{CustomModelData:2}}]}
execute if score pumpkin tbcStats matches 1.. if entity @s[type=!player] at @s run data merge entity @e[tag=charQA2,limit=1,sort=nearest] {ArmorItems:[{},{},{},{id:"raw_copper",Count:1,tag:{CustomModelData:2}}]}
execute if score @s tbcSpeed > slowness tbcStats if score slowness tbcStats matches 1 run tellraw @a ["",{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.success_slow","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"selector":"@s[type=!player]"}],{"text":"±.125","color":"red"}]}]
execute if score @s tbcSpeed > slowness tbcStats if score slowness tbcStats matches 2 run tellraw @a ["",{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.success_slow","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"selector":"@s[type=!player]"}],{"text":"±.25","color":"red"}]}]
execute if score @s tbcSpeed > slowness tbcStats if score slowness tbcStats matches 3 run tellraw @a ["",{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.success_slow","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"selector":"@s[type=!player]"}],{"text":"±.375","color":"red"}]}]
execute if score @s tbcSpeed > slowness tbcStats if score slowness tbcStats matches 5 run tellraw @a ["",{"nbt":"ArmorItems[0].tag.CustomName","entity":"@e[tag=tbcTurn,type=!player]","interpret":true},{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@e[tag=tbcTurn,type=player]","interpret":true},{"text":" >> ","color":"gray"},{"translate":"tbc.msg.success_slow","with":[[{"nbt":"EnderItems[{Slot:0b}].tag.name","entity":"@s[type=player]","interpret":true},{"selector":"@s[type=!player]"}],{"text":"±.5","color":"red"}]}]
execute if score @s tbcSpeed > slowness tbcStats run scoreboard players operation @s tbcSpeed -= slowness tbcStats

# Sound
execute at @s run playsound minecraft:entity.player.hurt player @s ~ ~ ~ 1 1